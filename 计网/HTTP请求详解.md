### **HTTP请求详解**

HTTP是计算机通过网络进行通信的规则，是一种基于请求与响应，无状态的，应用层的协议，基于TCP/IP协议。

**请求与响应：**客户端发送请求，服务端响应数据

**无状态的：**协议对于事务处理没有记忆能力，客户端第一次与服务器建立连接发送请求时需要进行一系列的安全认证匹配等，因此增加页面等待时间，当客户端向服务器端发送请求，服务器端响应完毕后，两者断开连接，也不保存连接状态

**应用层：**HTTP是属于应用层的协议，配合TCP/IP使用

**TCP/IP：**Http使用TCP作为它的支撑运输协议。HTTP客户机发起一个与服务器的TCP连接，一旦连接建立，浏览器（客户机）和服务器进程就可以通过套接字接口访问TCP。



#### 请求流程：

**1.建立TCP连接**

**2.Web浏览器向Web服务器发送请求命令**

例如：GET/sample/hello.jsp HTTP/1.1

**3. Web浏览器发送请求头信息** 
浏览器发送其请求命令之后，还要以头信息的形式向Web服务器发送一些别的信息，之后浏览器发送了一空白行来通知服务器，它已经结束了该头信息的发送。

**4. Web服务器应答** 
客户机向服务器发出请求后，服务器会客户机回送应答， HTTP/1.1 200 OK ，应答的第一部分是协议的版本号和应答状态码。

**5. Web服务器发送应答头信息** 
正如客户端会随同请求发送关于自身的信息一样，服务器也会随同应答向用户发送关于它自己的数据及被请求的文档。

**6. Web服务器向浏览器发送数据** 
Web服务器向浏览器发送头信息后，它会发送一个空白行来表示头信息的发送到此为结束，接着，它就以Content-Type应答头信息所描述的格式发送用户所请求的实际数据。

**7. Web服务器关闭TCP连接** 
一般情况下，一旦Web服务器向浏览器发送了请求数据，它就要关闭TCP连接，然后如果浏览器或者服务器在其头信息加入了这行代码：Connection:keep-alive

TCP连接在发送后将仍然保持打开状态，于是，浏览器可以继续通过相同的连接发送请求。保持连接节省了为每个请求建立新连接所需的时间，还节约了网络带宽。



#### 请求报文

![preview](https://pic3.zhimg.com/v2-c920e11f00c2510d9a8fa4f4009d0f2e_r.jpg)

**请求行：**请求方法，请求地址，协议版本

**请求头部：**请求报文添加了一些附加信息，名值对组成

![img](https://pic2.zhimg.com/80/v2-a052ad189d00a5068f534a7660208b01_720w.jpg)

请求头部的最后会有一个空行，表示请求头部结束，接下来为请求数据，这一行非常重要，必不可少。

**请求数据：**get请求没有请求数据，post请求有请求数据



#### 响应报文

![img](https://pic3.zhimg.com/80/v2-bdb035a8d48c2715f1fe485fbddb0d76_720w.jpg)

**状态行：**协议版本，状态码，状态码描述（200 OK）

![img](https://pic3.zhimg.com/80/v2-e17f000d14bf08f72a2e7cd2997577ca_720w.jpg)

**响应头部：**为响应报文添加一些附加信息

![img](https://pic1.zhimg.com/80/v2-20f71e1d5844d08aa794234ce166a438_720w.jpg)

**响应数据：**用于存放需要返回给客户端的数据信息